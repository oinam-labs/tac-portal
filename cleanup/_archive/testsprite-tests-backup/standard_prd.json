{
  "meta": {
    "project": "TAC Cargo Portal",
    "date": "2026-01-21",
    "prepared_by": "Generated by Expert QA Engineer"
  },
  "product_overview": "TAC Cargo Portal is a comprehensive, enterprise-grade logistics SaaS platform designed to streamline freight operations between Imphal and New Delhi hubs. It provides end-to-end shipment lifecycle management, manifest aggregation, scanning workflows, invoice generation, exceptions handling, and real-time analytics via a modern React 19 + Tailwind CSS 4 frontend backed by a Supabase PostgreSQL backend with robust RBAC and audit capabilities.",
  "core_goals": [
    "Deliver a highly reliable and secure logistics management platform adhering to enterprise standards.",
    "Enable seamless multi-tenant support with strict org and hub scoping and RLS enforcement.",
    "Provide scanning-first workflows to accelerate warehouse operations with offline persistence and automatic sync.",
    "Ensure auditability and traceability with immutable tracking and comprehensive logging.",
    "Facilitate role-based access control at UI, route, and database layers for operational security.",
    "Offer an intuitive UI/UX with modern design tokens, animations, and accessibility.",
    "Support complete shipment, manifest, invoice, exception, and customer management with efficient CRUD and filtering.",
    "Integrate real-time updates via Supabase Realtime and provide API consistency through service layers."
  ],
  "key_features": [
    "Comprehensive shipment lifecycle management with AWB generation and valid status transitions.",
    "Manifest creation and management supporting shipment grouping and lifecycle (OPEN, CLOSED, DEPARTED, ARRIVED).",
    "Camera and manual barcode/QR scanning workflows supporting sequential manifest and shipment scans with duplicate detection.",
    "Offline-first scan queue with auto synchronization and conflict resolution.",
    "Role-Based Access Control (RBAC) enforced across UI, routes, and database with multi-tenant isolation.",
    "Financial invoicing system with GST tax calculation, PDF generation, and Resend email integration.",
    "Exception reporting and resolution workflow linked to shipments with severity and SLA tracking.",
    "Real-time dashboard with KPIs, recent activity, and analytics charts using Recharts.",
    "Audit log system capturing all critical database mutations with immutable trail.",
    "Dark/light theme toggling with semantic OKLCH color design tokens and adaptive responsive layouts."
  ],
  "user_flow_summary": [
    "User logs in and is authenticated with role and org context determined.",
    "User navigates through appropriate accessible modules based on role permissions.",
    "User creates or views shipments, selecting customers and specifying details, with validations enforced.",
    "For manifests, user creates a manifest, adds shipments via scan or selection, views totals, and finalizes manifest locking edits.",
    "During scanning, user scans manifest QR, then sequentially scans shipment barcodes; the system validates routes, updates statuses, and logs scans with audio/visual feedback.",
    "Finance users generate invoices linked to shipments/customers, preview and send PDFs via email integration.",
    "Exceptions can be created for shipments, assigned, resolved, and audit logged with shipment status updates.",
    "Tracking displays shipment timeline events with live updates and public tracking is accessible.",
    "Settings allow user to configure profile and application preferences including theme."
  ],
  "validation_criteria": [
    "All shipment CRUD operations persist correctly with appropriate org scoping and status transitions.",
    "Manifest workflows enforce lifecycle constraints; shipments assigned uniquely, with totals recalculated upon changes.",
    "Scanning queues persist offline, synchronize correctly, and detect duplicates preventing status corruption.",
    "RBAC filters UI navigation and route access and is fully enforced at database policies level preventing data leaks.",
    "Invoices generate with accurate totals and taxes, produce valid PDFs, and email sending integrates properly.",
    "Exceptions link correctly to shipments and statuses are auditable with resolution notes.",
    "Dashboard KPIs and charts reflect up-to-date aggregated data, refreshed via realtime channels.",
    "Audit logs consistently record all changes with user and timestamp metadata and are immutable.",
    "UI renders correctly with loading, empty, and error states; forms validate inputs using Zod schemas.",
    "No P0/P1 defects remain; all workflows pass end-to-end testing with no critical bugs or security vulnerabilities."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Tailwind CSS",
      "Zustand",
      "React Query",
      "Radix UI",
      "Playwright",
      "Vitest"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "User authentication and route protection",
        "files": [
          "components/auth",
          "store/authStore.ts",
          "lib/auth.ts"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Main dashboard for user overview",
        "files": [
          "pages/Dashboard.tsx",
          "components/dashboard"
        ]
      },
      {
        "name": "Customers Management",
        "description": "Manage customers list and details",
        "files": [
          "pages/Customers.tsx",
          "components/customers",
          "hooks/useCustomers.ts"
        ]
      },
      {
        "name": "Shipments Management",
        "description": "Manage shipments, creating and tracking orders",
        "files": [
          "pages/Shipments.tsx",
          "components/shipments",
          "hooks/useShipments.ts"
        ]
      },
      {
        "name": "Manifests",
        "description": "Manifest creation, building, and scanning",
        "files": [
          "pages/Manifests.tsx",
          "components/manifests",
          "hooks/useManifests.ts",
          "hooks/useManifestBuilder.ts",
          "hooks/useManifestScan.ts"
        ]
      },
      {
        "name": "Finance",
        "description": "Financial records and invoices",
        "files": [
          "pages/Finance.tsx",
          "components/finance",
          "hooks/useInvoices.ts"
        ]
      },
      {
        "name": "Scanning",
        "description": "Barcode scanning and package processing",
        "files": [
          "pages/Scanning.tsx",
          "components/scanning",
          "store/scanQueueStore.ts"
        ]
      },
      {
        "name": "Tracking",
        "description": "Public and internal package tracking",
        "files": [
          "pages/Tracking.tsx",
          "pages/PublicTracking.tsx",
          "hooks/useTrackingEvents.ts"
        ]
      },
      {
        "name": "Settings",
        "description": "Application settings and configurations",
        "files": [
          "pages/Settings.tsx"
        ]
      },
      {
        "name": "Management",
        "description": "Staff and RBAC management",
        "files": [
          "pages/Management.tsx",
          "store/managementStore.ts",
          "hooks/useStaff.ts",
          "hooks/useRBAC.ts"
        ]
      },
      {
        "name": "Shift Reports",
        "description": "Daily shift reporting",
        "files": [
          "pages/ShiftReport.tsx",
          "hooks/useShiftReport.ts"
        ]
      },
      {
        "name": "Notifications",
        "description": "System notifications",
        "files": [
          "pages/Notifications.tsx"
        ]
      },
      {
        "name": "UI Components",
        "description": "Shared reusable UI components (Shadcn/UI)",
        "files": [
          "components/ui"
        ]
      }
    ]
  }
}
