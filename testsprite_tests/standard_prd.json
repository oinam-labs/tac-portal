{
  "meta": {
    "project": "TAC Cargo Enterprise Portal",
    "date": "2026-01-15",
    "prepared_by": "Generated by TAC Portal Dev Manager"
  },
  "product_overview": "TAC Cargo Enterprise Portal is a modern, React 19 and Supabase-based logistics SaaS platform designed to unify freight operations between Imphal and New Delhi hubs. It offers end-to-end management of cargo shipments, manifest operations, invoice generation, exceptions handling, and real-time analytics, supporting a cyber-themed design system with full role-based access control and offline-capable scanning workflows.",
  "core_goals": [
    "Unify all logistics data sources to a single Supabase backend to ensure data integrity and operational accuracy.",
    "Implement robust warehouse-grade scanning workflows with offline queue and auto-sync to ensure uninterrupted operations.",
    "Enforce multi-layer security with UI filtering, route protection, and Supabase Row Level Security (RLS) for strict data access control.",
    "Deliver an enterprise-grade, polished, and consistent UI/UX that supports dark/light modes, keyboard navigation, and real-time updates.",
    "Provide comprehensive audit logging and exception management for compliance and operational transparency."
  ],
  "key_features": [
    "Supabase-backed data architecture with React Query hooks and Zustand for UI state management.",
    "Full CRUD capabilities for shipments, manifests, invoices, exceptions, and customers with form validation via Zod.",
    "Barcode and QR code scanning integration supporting raw AWB, JSON manifest scans, with offline-first scan queue and automatic syncing.",
    "Manifest management including shipment assignment, status lifecycles, and printable manifests and label PDFs.",
    "Role-Based Access Control (RBAC) encompassing ADMIN, MANAGER, OPS, WAREHOUSE_IMPHAL, WAREHOUSE_DELHI, INVOICE, and SUPPORT roles with UI and route guards plus database RLS enforcement.",
    "Automated audit logging implemented via database triggers capturing all critical operations for traceability.",
    "Advanced UI enhancements including Radix UI components, Framer Motion animations, skeleton loaders, empty states, and a developer UI kit.",
    "Email integration using Resend API and Supabase Edge Functions for invoice communications.",
    "Real-time dashboard analytics with KPIs, tracking events timeline, and shift handover reporting.",
    "Sentry integration for error tracking, performance monitoring, session replay, and structured logging with full context."
  ],
  "user_flow_summary": [
    "Users log in and authenticate with role-based access limiting visible features and content.",
    "Warehouse staff perform scanning of manifests and shipments with feedback and offline queue syncing to update shipment and manifest status in real time.",
    "Operations managers create and manage manifests, assigning shipments either via scanning or manual input, then close manifests triggering status updates and audit logs.",
    "Finance staff create invoices linked to shipments, generate PDFs, print labels, and send email communications to customers.",
    "Users can track shipments by AWB with a realtime timeline of tracking events and receive notifications of exceptions.",
    "Admins and managers manage users, view audit logs, configure system settings, and review shift handover reports for operational oversight.",
    "All data interactions pass through React Query hooks enforcing organization scoping and consistency.",
    "UI components present loading, empty, and error states gracefully, supporting keyboard navigation and responsive layouts."
  ],
  "validation_criteria": [
    "All data modules use Supabase as the sole source of truth with no fallback to mock or local stores for production.",
    "Offline scan queue persists scans locally and synchronizes accurately when connectivity restores with status indicators shown to users.",
    "RBAC is enforced at UI level, route access level, and strictly in Supabase RLS policies, preventing unauthorized access.",
    "Audit logs exist and capture user actions for all create, update, and delete operations across critical tables.",
    "Manifest lifecycle operations correctly update related shipments and tracking events atomically, via Edge Function or transactional logic.",
    "UI/UX meets enterprise standards with consistent theming, accessibility support, and polished animations/transitions.",
    "Email invoice sending functions correctly with verification of Resend service integration and edge function deployment.",
    "E2E test scenarios cover shipment creation, scanning and manifest assembly, invoice generation and emailing, and user role access restriction.",
    "Sentry captures and reports errors with user context, breadcrumbs, and session replay for at least 10% of sessions and all errors.",
    "Invoice and label PDFs generate accurately with correct barcodes and QR codes, printable in common formats and matching specifications."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 19.0.0-rc",
      "Vite 6.2",
      "TailwindCSS 4.1",
      "Supabase",
      "PostgreSQL",
      "Zustand",
      "React Query (TanStack Query)",
      "React Router DOM",
      "Zod",
      "Playwright",
      "Sentry"
    ],
    "features": [
      {
        "name": "Authentication & Authorization",
        "description": "Supabase-based authentication with role-based access control (RBAC) supporting multiple user roles including ADMIN, MANAGER, OPS_STAFF, WAREHOUSE_STAFF, FINANCE_STAFF",
        "files": [
          "App.tsx",
          "store/authStore.ts",
          "hooks/useRBAC.ts",
          "components/auth"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Main dashboard with KPIs, analytics, and real-time metrics for cargo operations",
        "files": [
          "pages/Dashboard.tsx",
          "components/dashboard"
        ]
      },
      {
        "name": "Shipment Management",
        "description": "Create, track, and manage cargo shipments with AWB generation and status tracking",
        "files": [
          "pages/Shipments.tsx",
          "components/shipments",
          "hooks/useShipments.ts",
          "store/shipmentStore.ts",
          "lib/services"
        ]
      },
      {
        "name": "Tracking System",
        "description": "Real-time shipment tracking with public and internal tracking interfaces",
        "files": [
          "pages/Tracking.tsx",
          "pages/PublicTracking.tsx",
          "hooks/useTrackingEvents.ts",
          "lib/tracking-service.ts"
        ]
      },
      {
        "name": "Manifest Operations",
        "description": "Group shipments into manifests for linehaul transport between hubs",
        "files": [
          "pages/Manifests.tsx",
          "app/(protected)/manifests/create/page.tsx",
          "components/manifests",
          "hooks/useManifests.ts",
          "hooks/useCloseManifest.ts",
          "store/manifestStore.ts"
        ]
      },
      {
        "name": "Scanning & Barcode",
        "description": "Barcode scanning functionality for warehouse operations with QR and barcode generation",
        "files": [
          "pages/Scanning.tsx",
          "components/scanning",
          "store/scanQueueStore.ts",
          "lib/scanParser.ts"
        ]
      },
      {
        "name": "Inventory Management",
        "description": "Track and manage warehouse inventory across multiple hub locations",
        "files": [
          "pages/Inventory.tsx",
          "components/domain"
        ]
      },
      {
        "name": "Exception Handling",
        "description": "Track and resolve delivery exceptions and issues",
        "files": [
          "pages/Exceptions.tsx",
          "hooks/useExceptions.ts",
          "store/exceptionStore.ts"
        ]
      },
      {
        "name": "Finance & Invoicing",
        "description": "Invoice generation, payment tracking, and financial reporting with PDF generation",
        "files": [
          "pages/Finance.tsx",
          "components/finance",
          "hooks/useInvoices.ts",
          "store/invoiceStore.ts",
          "lib/pdf-generator.ts"
        ]
      },
      {
        "name": "Customer Management",
        "description": "Manage customer accounts, profiles, and relationships",
        "files": [
          "pages/Customers.tsx",
          "components/customers",
          "hooks/useCustomers.ts"
        ]
      },
      {
        "name": "Analytics & Reporting",
        "description": "Business intelligence with charts, KPIs, and shift reports",
        "files": [
          "pages/Analytics.tsx",
          "pages/ShiftReport.tsx",
          "hooks/useShiftReport.ts"
        ]
      },
      {
        "name": "User Management",
        "description": "Staff management, role assignment, and access control",
        "files": [
          "pages/Management.tsx",
          "components/management",
          "hooks/useStaff.ts",
          "store/managementStore.ts"
        ]
      },
      {
        "name": "Settings & Configuration",
        "description": "User preferences, system settings, and theme management",
        "files": [
          "pages/Settings.tsx",
          "store/index.ts",
          "components/theme-toggle.tsx",
          "components/theme-provider.tsx"
        ]
      },
      {
        "name": "Notifications",
        "description": "Real-time notifications and alerts system",
        "files": [
          "pages/Notifications.tsx",
          "lib/notifications",
          "hooks/useRealtime.ts"
        ]
      },
      {
        "name": "Print & Label Generation",
        "description": "Generate and print shipping labels with barcodes and QR codes",
        "files": [
          "pages/PrintLabel.tsx",
          "label-design"
        ]
      },
      {
        "name": "Landing Page",
        "description": "Public-facing landing page with company information",
        "files": [
          "pages/Landing.tsx",
          "components/landing",
          "components/landing-new"
        ]
      },
      {
        "name": "UI Component Library",
        "description": "Reusable UI components with cyber-themed design system",
        "files": [
          "components/ui",
          "pages/DevUIKit.tsx",
          "lib/design-tokens.ts"
        ]
      },
      {
        "name": "Command Palette",
        "description": "Global command palette for quick navigation (Cmd+K)",
        "files": [
          "components/domain/CommandPalette.tsx"
        ]
      },
      {
        "name": "Error Handling & Monitoring",
        "description": "Sentry integration for error tracking and monitoring",
        "files": [
          "lib/sentry.ts",
          "components/ui/error-boundary.tsx",
          "lib/errors.ts"
        ]
      },
      {
        "name": "Data Access Layer",
        "description": "Supabase data access with type-safe queries",
        "files": [
          "lib/data-access",
          "lib/supabase.ts",
          "lib/database.types.ts"
        ]
      },
      {
        "name": "Email Service",
        "description": "Email notifications and communication",
        "files": [
          "lib/email.ts"
        ]
      },
      {
        "name": "Validation & Schemas",
        "description": "Zod schemas for form validation and data validation",
        "files": [
          "lib/schemas",
          "lib/validation",
          "lib/validators"
        ]
      },
      {
        "name": "Audit Logging",
        "description": "Track user actions and system events",
        "files": [
          "hooks/useAuditLogs.ts",
          "store/auditStore.ts"
        ]
      }
    ]
  }
}
