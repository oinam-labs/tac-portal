{
  "meta": {
    "project": "TAC Cargo Dashboard",
    "date": "2026-01-21",
    "prepared_by": "Generated by enterprise QA and product analysis"
  },
  "product_overview": "TAC Cargo Dashboard is a comprehensive enterprise SaaS solution designed for managing freight logistics operations between Imphal and New Delhi hubs. It offers end-to-end capabilities including shipment lifecycle management, manifest operations, barcode scanning with offline-first queueing, invoice generation with PDF and barcode support, exception handling, real-time tracking, role-based access control, audit logging, and centralized customer and staff management, all built on a modern stack featuring React 19, Tailwind CSS v4, Supabase, and Zustand.",
  "core_goals": [
    "Provide a single source of truth by fully integrating with Supabase as the backend, eliminating reliance on mock databases.",
    "Implement warehouse-grade scanning workflows including offline queueing and automatic synchronization with manifest and tracking systems.",
    "Enforce multi-layered security with UI, route guards, and Supabase Row Level Security (RLS) policies to ensure tenant isolation and role-based access control.",
    "Provide an enterprise-grade, polished UI/UX with consistent design patterns, loading and empty states, real-time dashboards, and accessibility compliance.",
    "Deliver robust audit logging for all critical actions including shipment updates, manifest lifecycle events, invoice operations, and exception handling.",
    "Support complete shipment lifecycle, manifest management, scanning operations, tracking event history, exception workflows, finance billing, and customer management modules with full CRUD and business validations.",
    "Enable monitoring, error reporting, and performance tracking using Sentry integration and structured logging."
  ],
  "key_features": [
    "Multi-role authentication and authorization supporting ADMIN, MANAGER, OPS_STAFF, WAREHOUSE_STAFF, FINANCE_STAFF, and SUPPORT roles.",
    "Shipment management with AWB generation, status tracking through multiple lifecycle stages, and customer linkage.",
    "Manifest creation and management with shipment assignment, dispatch workflow, and batch printing of labels and cover sheets.",
    "Barcode and QR code scanning with real-time validation, duplicate detection, offline queue persistence, and scan-to-manifest linking.",
    "Invoice creation with GST and tax calculations, PDF generation, status workflow tracking (DRAFT to PAID/CANCELLED), and customer billing information management.",
    "Exception handling module with types (DAMAGED, LOST, DELAYED, etc.), severity levels, resolution workflow, and audit trails.",
    "Inventory management for warehouse stock tracking with bin locations and aging analysis.",
    "Real-time analytics dashboards displaying KPIs, shipment statuses, and business trends.",
    "Role-based UI rendering and route protection ensuring each user accesses only permitted modules.",
    "Comprehensive error handling with Sentry integration including error boundaries, session replay, and logging.",
    "Reusable CRUD components and standardized query key patterns ensuring maintainability and scalability.",
    "Audit log viewer and export functionality providing operational transparency and compliance."
  ],
  "user_flow_summary": [
    "User logs in with role-based authentication enforced via Supabase and frontend route guards.",
    "Dashboard displays real-time KPIs and recent activities filtered by user role and organization.",
    "Users create and manage shipments, associating them with customers and tracking their status through various lifecycle stages.",
    "Operators create manifests and assign shipments via scanning or manual selection, following the dispatch workflow (OPEN, CLOSED, DEPARTED, ARRIVED).",
    "Warehouse staff perform barcode/QR scanning, which queues scans offline and syncs with the backend when online, updating shipment and manifest statuses.",
    "Invoices are created, managed, and issued with PDF generation and barcode embedding, reflecting payment statuses accurately.",
    "Exceptions are raised and resolved with linked shipment references, severity tagging, and workflow integration.",
    "Users monitor shipments via internal and public tracking interfaces showing event history.",
    "Admins and managers manage staff roles, customer data, and system settings ensuring secure and accurate operations.",
    "Audit logs automatically capture all critical operations and can be reviewed and exported for compliance."
  ],
  "validation_criteria": [
    "All user roles and access permissions are enforced consistently at UI, route, and database levels with no unauthorized data access.",
    "Shipment statuses progress only via valid transitions as defined by the business rules and changes are auditable.",
    "Manifests reflect accurate shipment inclusion, total counts, and status transitions with no duplicates allowed.",
    "Offline scanning queue reliably persists scans and syncs changes to Supabase once connectivity is restored without data loss or corruption.",
    "Invoice totals including taxes and discounts correctly calculate and persist with unique invoice identification per organization.",
    "Exception records link accurately to shipments and their resolution updates state consistently across modules.",
    "All API calls to Supabase succeed with appropriate error handling and retries, with no leakage of sensitive data.",
    "The UI displays consistent loading, empty, and error states on all paginated tables and forms.",
    "Real-time data updates reflect timely on dashboards and tracking timelines via Supabase Realtime subscriptions with proper resource cleanup.",
    "Audit logs capture every critical CRUD operation with actor identity, timestamps, and before/after state data accessible to authorized users.",
    "The entire platform demonstrates zero critical or blocker severity issues, with passed E2E tests covering shipment, manifest, scanning, and invoice workflows.",
    "Accessibility standards are met including keyboard navigation, color contrast, and screen reader support on all major UI components."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 19",
      "Vite",
      "react-router-dom",
      "Supabase (Auth + Postgres + RLS)",
      "TanStack React Query",
      "Zustand",
      "Tailwind CSS v4",
      "Radix UI",
      "shadcn/ui",
      "pdf-lib",
      "jsbarcode",
      "bwip-js",
      "ZXing",
      "Sentry",
      "Playwright",
      "Vitest"
    ],
    "features": [
      {
        "name": "Authentication",
        "description": "Supabase-based authentication with role-based access control (RBAC). Supports roles: ADMIN, MANAGER, OPS_STAFF, WAREHOUSE_STAFF, FINANCE_STAFF, SUPPORT",
        "files": [
          "store/authStore.ts",
          "lib/supabase.ts",
          "App.tsx"
        ]
      },
      {
        "name": "Dashboard",
        "description": "Main dashboard with KPIs, charts, and quick actions for logistics operations",
        "files": [
          "pages/Dashboard.tsx"
        ]
      },
      {
        "name": "Shipments",
        "description": "CRUD operations for shipments with AWB generation, status tracking, and customer association",
        "files": [
          "pages/Shipments.tsx",
          "lib/services/shipmentService.ts",
          "lib/schemas/shipment.schema.ts"
        ]
      },
      {
        "name": "Manifests",
        "description": "Manifest creation, shipment assignment, dispatch workflow (OPEN -> CLOSED -> DEPARTED -> ARRIVED)",
        "files": [
          "pages/Manifests.tsx",
          "app/(protected)/manifests/create/page.tsx",
          "lib/services/manifestService.ts"
        ]
      },
      {
        "name": "Scanning",
        "description": "Barcode/QR scanning with idempotent shipment-to-manifest assignment. Supports ZXing scanner integration",
        "files": [
          "pages/Scanning.tsx",
          "lib/scanParser.ts"
        ]
      },
      {
        "name": "Invoices",
        "description": "Invoice creation, management, PDF generation with barcode. Status workflow: DRAFT -> ISSUED -> PAID/CANCELLED",
        "files": [
          "pages/Finance.tsx",
          "lib/services/invoiceService.ts",
          "lib/pdf-generator.ts"
        ]
      },
      {
        "name": "Customers",
        "description": "Customer management with GSTIN, address, and billing information",
        "files": [
          "pages/Customers.tsx",
          "lib/services/customerService.ts",
          "lib/schemas/customers.schema.ts"
        ]
      },
      {
        "name": "Tracking",
        "description": "Internal and public shipment tracking with event history",
        "files": [
          "pages/Tracking.tsx",
          "pages/PublicTracking.tsx",
          "lib/services/trackingService.ts",
          "lib/tracking-service.ts"
        ]
      },
      {
        "name": "Exceptions",
        "description": "Exception handling for shipments with assignment, resolution workflow, and severity levels",
        "files": [
          "pages/Exceptions.tsx",
          "lib/services/exceptionService.ts"
        ]
      },
      {
        "name": "Inventory",
        "description": "Warehouse inventory management and stock tracking",
        "files": [
          "pages/Inventory.tsx"
        ]
      },
      {
        "name": "Analytics",
        "description": "Business analytics with charts and metrics for operations performance",
        "files": [
          "pages/Analytics.tsx"
        ]
      },
      {
        "name": "Management",
        "description": "Staff, hub, and organization management (ADMIN only)",
        "files": [
          "pages/Management.tsx",
          "lib/services/staffService.ts",
          "lib/services/orgService.ts"
        ]
      },
      {
        "name": "PrintLabel",
        "description": "Shipping label generation and printing with barcode",
        "files": [
          "pages/PrintLabel.tsx",
          "lib/pdf-generator.ts"
        ]
      },
      {
        "name": "Notifications",
        "description": "User notification system for alerts and updates",
        "files": [
          "pages/Notifications.tsx",
          "lib/notifications/"
        ]
      },
      {
        "name": "Settings",
        "description": "User preferences and application settings",
        "files": [
          "pages/Settings.tsx"
        ]
      },
      {
        "name": "ShiftReport",
        "description": "Shift-based operational reporting for warehouse staff",
        "files": [
          "pages/ShiftReport.tsx",
          "lib/services/shiftReportService.ts"
        ]
      },
      {
        "name": "AuditService",
        "description": "Audit logging for critical operations and compliance",
        "files": [
          "lib/services/auditService.ts"
        ]
      },
      {
        "name": "ErrorHandling",
        "description": "Centralized error handling with Sentry integration and user-friendly error messages",
        "files": [
          "lib/errors.ts",
          "lib/sentry.ts",
          "components/ui/error-boundary.tsx"
        ]
      }
    ]
  }
}
